package it.uniroma1.di.simulejos.opengl;

import javax.media.opengl.GL2GL3;

public class Shader extends GLObject {
	public enum Type {
		VERTEX {
			@Override
			int getGLType() {
				return GL2GL3.GL_VERTEX_SHADER;
			}
		},
		FRAGMENT {
			@Override
			int getGLType() {
				return GL2GL3.GL_FRAGMENT_SHADER;
			}
		};
		abstract int getGLType();
	};

	final int id;

	public Shader(GL2GL3 gl, Type type) {
		super(gl);
		this.id = gl.glCreateShader(type.getGLType());
	}

	public void source(String source) {
		final String[] sources = { source };
		gl.glShaderSource(id, 1, sources, null, 0);
	}

	public void compile() {
		gl.glCompileShader(id);
	}

	public boolean isCompiled() {
		final int[] result = new int[1];
		gl.glGetShaderiv(id, GL2GL3.GL_COMPILE_STATUS, result, 0);
		return result[0] != 0;
	}

	public String getInfoLog() {
	}

	public void delete() {
		gl.glDeleteShader(id);
	}

	public boolean isDeleted() {
		final int[] result = new int[1];
		gl.glGetShaderiv(id, GL2GL3.GL_DELETE_STATUS, result, 0);
		return result[0] != 0;
	}
}
